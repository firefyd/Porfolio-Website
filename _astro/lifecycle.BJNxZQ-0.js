import{ax as k,D as l,N as y,U as h,O as w,o as u,E as _,k as d,z as A,ay as E,F as x,t as S,q as T,an as F,w as N,H as R,x as C,j as D,y as p,c as M,az as B,u as v,aA as b,a as I,aB as O,h as g,aC as z,$ as H}from"./template.CQuvCIYM.js";const L="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(L);k();class P{anchor;#t=new Map;#s=new Map;#e=new Map;#a=new Set;#r=!0;constructor(e,t=!0){this.anchor=e,this.#r=t}#i=()=>{var e=l;if(this.#t.has(e)){var t=this.#t.get(e),s=this.#s.get(t);if(s)y(s),this.#a.delete(t);else{var i=this.#e.get(t);i&&(this.#s.set(t,i.effect),this.#e.delete(t),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),s=i.effect)}for(const[a,r]of this.#t){if(this.#t.delete(a),a===e)break;const n=this.#e.get(r);n&&(h(n.effect),this.#e.delete(r))}for(const[a,r]of this.#s){if(a===t||this.#a.has(a))continue;const n=()=>{if(Array.from(this.#t.values()).includes(a)){var c=document.createDocumentFragment();E(r,c),c.append(u()),this.#e.set(a,{effect:r,fragment:c})}else h(r);this.#a.delete(a),this.#s.delete(a)};this.#r||!s?(this.#a.add(a),w(r,n,!1)):n()}}};#n=e=>{this.#t.delete(e);const t=Array.from(this.#t.values());for(const[s,i]of this.#e)t.includes(s)||(h(i.effect),this.#e.delete(s))};ensure(e,t){var s=l,i=x();if(t&&!this.#s.has(e)&&!this.#e.has(e))if(i){var a=document.createDocumentFragment(),r=u();a.append(r),this.#e.set(e,{effect:_(()=>t(r)),fragment:a})}else this.#s.set(e,_(()=>t(this.anchor)));if(this.#t.set(s,e),i){for(const[n,f]of this.#s)n===e?s.skipped_effects.delete(f):s.skipped_effects.add(f);for(const[n,f]of this.#e)n===e?s.skipped_effects.delete(f.effect):s.skipped_effects.add(f.effect);s.oncommit(this.#i),s.ondiscard(this.#n)}else d&&(this.anchor=A),this.#i()}}function j(o,e,t=!1){d&&T();var s=new P(o),i=t?F:0;function a(r,n){if(d){const c=N(o)===R;if(r===c){var f=C();D(f),s.anchor=f,p(!1),s.ensure(r,n),p(!0);return}}s.ensure(r,n)}S(()=>{var r=!1;e((n,f=!0)=>{r=!0,a(f,n)}),r||a(!1,null)},i)}function q(o=!1){const e=M,t=e.l.u;if(!t)return;let s=()=>z(e.s);if(o){let i=0,a={};const r=H(()=>{let n=!1;const f=e.s;for(const c in f)f[c]!==a[c]&&(a[c]=f[c],n=!0);return n&&i++,i});s=()=>g(r)}t.b.length&&B(()=>{m(e,s),b(t.b)}),v(()=>{const i=I(()=>t.m.map(O));return()=>{for(const a of i)typeof a=="function"&&a()}}),t.a.length&&v(()=>{m(e,s),b(t.a)})}function m(o,e){if(o.l.s)for(const t of o.l.s)g(t);e()}export{j as a,q as i};
